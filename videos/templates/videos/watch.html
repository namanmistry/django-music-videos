{% load static %}
<!DOCTYPE html>
<html>
<head>
	<title>Youtube</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" type="text/css" href="{% static 'videos/css/bootstrap.css' %}">

	<link rel="stylesheet" type="text/css" href="{% static 'videos/css/all.min.css' %}">
	<link rel="stylesheet" type="text/css" href="{% static 'videos/css/fontawesome.css' %}"> 
	<link rel="stylesheet" type="text/css" href="{% static 'videos/css/style.css' %}">

	 <script src="https://cdnjs.cloudflare.com/ajax/libs/shaka-player/3.0.7/shaka-player.ui.min.js" integrity="sha512-KpD7UW8aOliftdEvclj0KBnwh6vKS708SS41xCNr11yjCSAcYxb4+tlaQTfK+GDw2VCv2DxiM2Zu1d3+WqXw+g==" crossorigin="anonymous"></script>
	 <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/shaka-player/3.0.7/controls.min.css" integrity="sha512-XLwXArwaPbtdmlcbaeNgSF3cBB4Q7T7ptfhEfpkDIc/gkvKk8S413yzTByJ7X9dgOZR/T7NxrQI0HE4hlc+2GQ==" crossorigin="anonymous" />
	 <script defer src="https://www.gstatic.com/cv/js/sender/v1/cast_sender.js"></script>
 <script src="https://cdn.dashjs.org/latest/dash.all.min.js"></script>


</head>
<body>
	<!-- Top navbar -->
	
	<!-- Top navbar -->

	<!-- mobile top navbar -->
	<nav class="container-fluid fixed-top bg-white pt-3" id="top_nav_mobile">
		<div class="row">
			<div class="col-3 pl-4">
				<a class="navbar-brand" href="index.html"><img src="images/logo.jpg" class="mb-2"></a>
			</div>
			<div class="col-7">
				<form>
					<div class="input-group mb-3">
						<input type="text" class="form-control search" placeholder="Search">
						<div class="input-group-append">
							<button class="btn btn-outline-secondary" data-toggle="tooltip" data-placement="bottom" title="Search!"><i class="fas fa-search"></i></button>
						</div>
					</div>
				</form>
			</div>
			<div class="col-2 text-right">
				<a href="login.html"><i class="fas fa-user-circle" style="font-size: 30px;"></i></a>
			</div>
		</div>
	</nav>
	<!-- mobile top navbar -->

<!-- sidebar -->
 <nav class="main-nav desc_hide">
      <ul>
        <li class="">
          <a href="index.html">
          	<span class="fa fa-2x">
	            <svg style="display: block; height: 24px; width: 24px;margin: auto;" viewBox="0 0 24 24">
				   <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8" fill="red"></path>
				</svg>
			</span>
            <span class="nav-text">
                Home
            </span>
          </a>
        </li>

        <li class="has-subnav">
          <a href="trending.html">
          	<span class="fa fa-2x">
	            <svg style="display: block; height: 24px; width: 24px;margin: auto;" viewBox="0 0 24 24">
				  <path d="M17.53 11.2c-.23-.3-.5-.56-.76-.82-.65-.6-1.4-1.03-2.03-1.66-1.46-1.46-1.78-3.87-.85-5.72-.9.23-1.75.75-2.45 1.32C8.9 6.4 7.9 10.07 9.1 13.22c.04.1.08.2.08.33 0 .22-.15.42-.35.5-.22.1-.46.04-.64-.12-.06-.05-.1-.1-.15-.17-1.1-1.43-1.28-3.48-.53-5.12C5.87 10 5 12.3 5.12 14.47c.04.5.1 1 .27 1.5.14.6.4 1.2.72 1.73 1.04 1.73 2.87 2.97 4.84 3.22 2.1.27 4.35-.12 5.96-1.6 1.8-1.66 2.45-4.3 1.5-6.6l-.13-.26c-.2-.45-.47-.87-.78-1.25zm-3.1 6.3c-.28.24-.73.5-1.08.6-1.1.38-2.2-.16-2.88-.82 1.2-.28 1.9-1.16 2.1-2.05.17-.8-.14-1.46-.27-2.23-.12-.74-.1-1.37.2-2.06.15.38.35.76.58 1.06.76 1 1.95 1.44 2.2 2.8.04.14.06.28.06.43.03.82-.32 1.72-.92 2.26z" fill="#606060"></path>
				</svg>
			</span>
            <span class="nav-text">
           	  Trending
            </span>
          </a>
        </li>

        <li class="has-subnav mb-2">
          <a href="subscription.html">
           <span class="fa fa-2x">
	            <svg style="display: block; height: 24px; width: 24px;margin: auto;" viewBox="0 0 24 24">
				  <path d="M18.7 8.7H5.3V7h13.4v1.7zm-1.7-5H7v1.6h10V3.7zm3.3 8.3v6.7c0 1-.7 1.6-1.6 1.6H5.3c-1 0-1.6-.7-1.6-1.6V12c0-1 .7-1.7 1.6-1.7h13.4c1 0 1.6.8 1.6 1.7zm-5 3.3l-5-2.7V18l5-2.7z" fill="#606060"></path>
				</svg>
			</span>
            <span class="nav-text">
             Subscription
            </span>
          </a>
        </li>

        <li class="has-subnav border-top">
          <a href="library.html">
             <span class="fa fa-2x">
	            <svg style="display: block; height: 24px; width: 24px;margin: auto;" viewBox="0 0 24 24">
				  <path d="M4 6H2v14c0 1.1.9 2 2 2h14v-2H4V6zm16-4H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-8 12.5v-9l6 4.5-6 4.5z" fill="#606060"></path>
				</svg>
			</span>
            <span class="nav-text">
              Library
            </span>
          </a>
        </li>
        <li class="has-subnav">
          <a href="history.html">
             <span class="fa fa-2x">
	            <svg style="display: block; height: 24px; width: 24px;margin: auto;" viewBox="0 0 24 24">
				 <path d="M11.9 3.75c-4.55 0-8.23 3.7-8.23 8.25H.92l3.57 3.57.04.13 3.7-3.7H5.5c0-3.54 2.87-6.42 6.42-6.42 3.54 0 6.4 2.88 6.4 6.42s-2.86 6.42-6.4 6.42c-1.78 0-3.38-.73-4.54-1.9l-1.3 1.3c1.5 1.5 3.55 2.43 5.83 2.43 4.58 0 8.28-3.7 8.28-8.25 0-4.56-3.7-8.25-8.26-8.25zM11 8.33v4.6l3.92 2.3.66-1.1-3.2-1.9v-3.9H11z" fill="#606060"></path>
				</svg>
			</span>
            <span class="nav-text">
                History
            </span>
          </a>
        </li>
      </ul>
    </nav>
<!-- sidebar -->
	

	<!-- main content -->
	<div class="container-fluid watch_video">
		<div class="row pt-4">
			<div class="col-md-8 video_box">
				<div data-shaka-player-container style="max-width:40em"
         data-shaka-player-cast-receiver-id="930DEB06">
       <!-- The data-shaka-player tag will make the UI library use this video element.
            If no video is provided, the UI will automatically make one inside the container div. -->
      <video autoplay data-shaka-player id="video" src="/media/{{song.id}}/{{song.path}}.mpd" style=" width:100%; height:100%"></video>
    </div>
				<div class="p-1 pt-3">
					<div class="title">Full Song: {{song.title}} | By {{song.artist}}</div>
					
					<div class="row mt-4 border-bottom ">
						
						<div class="ml-5 col-9 pl-0">
							
							<p>{{song.description}}<span id="dots">...</span>
							
							</p>
							<button onclick="myFunction()" id="myBtn" class="btn">SHOW MORE</button>
						</div>
						

					</div>
					
					<!-- <div class="row mt-4">
						<div class="col-1">
							<img id="img" width="48" src="images/icon/avatar.png" class="rounded-circle">
						</div>
						<div class="col-11">
							<div><b>Vasudha Deshpande</b> 3 months ago</div>
							<div>Mummy ke taane aur arijit ke gaane... Dil ko chhu jaate hain‚ù§üòò</div>
						</div>
					</div>
					<div class="row mt-4">
						<div class="col-1">
							<img id="img" width="48" src="images/icon/avatar.png" class="rounded-circle">
						</div>
						<div class="col-11">
							<div><b>Vasudha Deshpande</b> 3 months ago</div>
							<div>Mummy ke taane aur arijit ke gaane... Dil ko chhu jaate hain‚ù§üòò</div>
						</div>
					</div> -->
				</div>
			</div>
			
		</div>
	</div>
	<center><form method="POST" action="/delete/"><button class="btn btn-danger btn-sm mt-1 mb-1" type="submit"><input hidden value={{song.id}} name="id">Delete</button></form></center>
		<!-- main content -->

		<script src="{% static 'videos/js/jquery-3.5.1.min.js' %}"></script>
		<script src="{% static 'videos/js/popper.min.js' %}"></script>
		<script src="{% static 'videos/js/bootstrap.min.js' %}"></script>

		<script>
			$(document).ready(function(){
				$('[data-toggle="tooltip"]').tooltip();   
			});

function myFunction() {
  var dots = document.getElementById("dots");
  var moreText = document.getElementById("more");
  var btnText = document.getElementById("myBtn");

  if (dots.style.display === "none") {
    dots.style.display = "inline";
    btnText.innerHTML = "SHOW MORE"; 
    moreText.style.display = "none";
  } else {
    dots.style.display = "none";
    btnText.innerHTML = "SHOW LESS"; 
    moreText.style.display = "inline";
  }
}


</script>
<script>
    
    // 'media/stream/0b97b1ef-a193-4ce7-8a0f-bca5a927a0f9.mpd';

    async function init() {
    // When using the UI, the player is made automatically by the UI object.
    const video = document.getElementById('video');
    const ui = video['ui'];
    const controls = ui.getControls();
    const player = controls.getPlayer();

    // Attach player and ui to the window to make it easy to access in the JS console.
    window.player = player;
    window.ui = ui;

    // Listen for error events.
    player.addEventListener('error', onPlayerErrorEvent);
    controls.addEventListener('error', onUIErrorEvent);

    // Try to load a manifest.
    // This is an asynchronous process.
    try {
        await player.load(manifestUri);
        // This runs if the asynchronous load is successful.
        console.log('The video has now been loaded!');
    } catch (error) {
        onPlayerError(error);
    }
    }

    function onPlayerErrorEvent(errorEvent) {
    // Extract the shaka.util.Error object from the event.
    onPlayerError(event.detail);
    }

    function onPlayerError(error) {
    // Handle player error
    console.error('Error code', error.code, 'object', error);
    }

    function onUIErrorEvent(errorEvent) {
    // Extract the shaka.util.Error object from the event.
    onPlayerError(event.detail);
    }

    function initFailed(errorEvent) {
    // Handle the failure to load; errorEvent.detail.reasonCode has a
    // shaka.ui.FailReasonCode describing why.
    console.error('Unable to load the UI library!');
    }

    // Listen to the custom shaka-ui-loaded event, to wait until the UI is loaded.
    document.addEventListener('shaka-ui-loaded', init);
    // Listen to the custom shaka-ui-load-failed event, in case Shaka Player fails
    // to load (e.g. due to lack of browser support).
    document.addEventListener('shaka-ui-load-failed', initFailed);

</script>
	</body>
	</html>